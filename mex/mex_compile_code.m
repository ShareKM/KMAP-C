% This is a MATLAB script demonstrating compiling kinetic model files
%
% OpenKMAP Oct 2024.

% Collect the files of different kinetic models
kmodFiles = {'ktac_1tcm_mex', 'kfit_1tcm_mex', 'kfit_1tcm_mex_omp', ...
             'ktac_2tcm_mex', 'kfit_2tcm_mex', 'kfit_2tcm_mex_omp', ...
             'ktac_liver_mex', 'kfit_liver_mex', 'kfit_liver_mex_omp' ...
            };

% Compile each file
for i = 1:length(kmodFiles)
    file_i = kmodFiles{i};
    mex -v sprintf('../mex/%s,file_i) ...
    ../src/kmaplib_common.cpp ...
    ../src/kmaplib_infun.cpp ...
    ../src/kmaplib_models.cpp ...
    ../src/kmaplib_optimization.cpp ...
    -I../src/ ...
    CXXFLAGS='$CXXFLAGS -fopenmp' ...
    LDFLAGS='$LDFLAGS -fopenmp';
end
